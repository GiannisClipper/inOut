<!DOCTYPE=html>
<html>
<head>
  <meta charset="utf-8">
  <% var page='home'; %>
  <% include ./parts/head.ejs %>
  <!--τα paths ορίζονται ως προς το /public-->
  <script type="text/javascript" src="/js/lib.js"></script>
</head>

<body>
  <header>
    <% include ./parts/header.ejs %>
  </header>

  <section>
    <div class="container">
      <div class="login">
        <div>Όνομα χρήστη</div>
        <div><input type="text" class="name"></div>
        <div>Κωδικός εισόδου</div>
        <div><input type="password" class="password"></div>
        <input type="button" value="Είσοδος">
      </div>
    </div>
  </section>

  <footer>
    <% include ./parts/footer.ejs %>
  </footer>
  
  <script type="text/javascript">
    function login() {
      request('/users/login', {name: document.querySelector('.login .name').value, password: document.querySelector('.login .password').value})
      .then(data=> {
        if (data.error) throw data;
        removeClass(document.querySelector('header nav'), 'login');
        document.querySelector('section').innerHTML='';
      })
      .catch(error=> alert((error.error)?error.error:error));
    }

    function init() {
      addClass(document.querySelector('header nav'), 'login'); //.forEach((x,i)=> i>0?x.style.visibility='hidden':null);
      document.querySelector('input[type="button"]').onclick=login;
    }
 
    window.onload=()=> init();
  </script>
</body>
</html>